# 부족했던 개념들

## 디바운스 vs 스로틀

<details>
<summary>펼치기/접기</summary>

### 디바운스(Debounce)
- 이벤트가 연속해서 발생할 때, 마지막 이벤트 발생 후 일정 시간 동안 추가 이벤트가 없을 때에만 한 번 실행하는 기법
- 즉, 사용자가 특정 행동을 멈춘 후에야 실행
- 예) 검색창에서 타이핑할 때, 사용자가 입력을 멈추고 300ms 후에 검색 요청을 보내는 경우 
- 장점: 불필요한 반복 실행을 막아 서버 부하나 렌더링 부담을 줄여줌

예시 코드: 스크롤 멈춘 후 300ms 동안 추가 스크롤 없으면 새 데이터 불러옴
```typescript jsx
import React, { useState, useEffect } from "react";

function debounce(func: Function, delay: number) {
  let timer: NodeJS.Timeout;
  return (...args: any) => {
    clearTimeout(timer);
    timer = setTimeout(() => func(...args), delay);
  };
}

export function DebounceInfiniteScroll() {
  const [items, setItems] = useState<number[]>([]);
  
  const loadMore = () => {
    console.log("Load more items - debounce");
    // 추가 아이템 불러오기 로직
  };

  const handleScroll = debounce(() => {
    if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
      loadMore();
    }
  }, 300);

  useEffect(() => {
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return <div>{/* 리스트 렌더링 */}</div>;
}
```

### 스로틀(Throttle)
- 이벤트가 계속해서 발생해도, 설정된 시간 간격마다 한 번씩만 실행하도록 제한하는 기법
- 연속 이벤트를 일정 주기로 나누어 실행
- 예) 스크롤 이벤트를 500ms에 한 번씩 처리하여 과도한 호출 방지
- 장점: 주기적으로 이벤트를 실행하므로 중간 중간 상태를 갱신할 수 있어 부드러운 사용자 경험을 제공

예시 코드: 스크롤이 계속되어도 500ms에 한 번 호출 제한하여 새 데이터 요청
```typescript jsx
import React, { useState, useEffect } from "react";

function throttle(func: Function, limit: number) {
  let inThrottle: boolean;
  return (...args: any) => {
    if (!inThrottle) {
      func(...args);
      inThrottle = true;
      setTimeout(() => (inThrottle = false), limit);
    }
  };
}

export function ThrottleInfiniteScroll() {
  const [items, setItems] = useState<number[]>([]);
  
  const loadMore = () => {
    console.log("Load more items - throttle");
    // 추가 아이템 불러오기 로직
  };

  const handleScroll = throttle(() => {
    if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
      loadMore();
    }
  }, 500);

  useEffect(() => {
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return <div>{/* 리스트 렌더링 */}</div>;
}
```

### 디바운스가 입력창과 같은 이벤트에 더 유리함에도 무한 스크롤에서 고려되는 이유
사용자의 스크롤 이벤트가 매우 빠르고 빈번하게 발생할 때, 실제로는 마지막 스크롤 멈춤 시점에만 데이터를 새로 불러오는 것이 효율적일 수 있기 때문
- 스크롤이 멈추는 시점 감지
  - 사용자가 스크롤을 빠르게 내릴 때마다 데이터를 불러오면 과도한 네트워크 요청과 렌더링 부담이 발생
  - 디바운스는 "마지막 스크롤 후 일정 시간 동안 추가 스크롤이 없으면" 한 번만 처리하도록 해 과부하를 줄임
- 불필요한 요청 방지
  - 예를 들어, 사용자가 스크롤을 중간에 잠시 멈추면 그때 데이터를 요청해도 충분하다면 디바운스를 적용해 효율을 높일 수 있음
- 네트워크 비용 절감 및 UX 향상
  - 반복된 데이터 로드를 줄여 서버 부담을 낮추고, 사용자에게 부드러운 경험을 제공 

### 정리
```text
무한 스크롤에서는 주기적 상태 갱신(스로틀)과 마지막 이벤트 대기(디바운스)가 모두 상황에 따라 필요할 수 있습니다.
스로틀은 스크롤이 연속될 때 일정 주기로 상태를 업데이트하고, 
디바운스는 스크롤이 멈춘 시점에 한 번만 최종 데이터를 불러오는 데 사용됩니다.
```

[위로](#디바운스-vs-스로틀)

</details>

## 콜백 함수와 프로미스

<details>
<summary>펼치기/접기</summary>

### 기본 개념
- 다른 함수의 인자로 전달되어 특정 이벤트가 발생하거나 작업이 완료되면 호출되는 함수
- 주로 비동기 작업의 결과를 처리하기 위해 사용됨
- 예를 들어, 서버에서 데이터를 받아서 그 결과를 콜백 함수 안에서 처리하는 방식

### 프로미스(Promise)
- 비동기 작업의 성공(이행) 또는 실패(거부) 상태와 그 결과를 표현하는 객체
- .then(), .catch() 메서드를 사용해 결과를 처리하며, 체이닝(연속된 비동기 호출)을 쉽게 할 수 있음
- ES6 이후 공식적인 비동기 처리 메커니즘으로 자리 잡음

#### 프로미스의 이점
- 가독성 향상: 복잡한 비동기 작업을 순차적으로 처리할 때 콜백 지옥 문제를 해결해줌
- 에러 처리 용이: .catch()를 통해 실패나 예외를 체계적으로 처리 가능
- 비동기 결과 재사용 가능: 프로미스 객체 자체에 결과를 저장하기 때문에 여러 곳에서 활용할 수 있음
- 코드 간결화: async/await 구문을 써서 마치 동기 코드처럼 비동기 작업을 처리할 수 있음

```javascript
// 콜백 지옥 예시
getData(function(a) {
    getMoreData(a, function(b) {
        getEvenMoreData(b, function(c) {
            // 깊어지는 중첩...
        });
    });
});

// 프로미스 체이닝
getData()
    .then(a => getMoreData(a))
    .then(b => getEvenMoreData(b))
    .then(c => console.log(c));
```

[위로](#콜백-함수와-프로미스)

</details>

## 자바스크립트의 특징

<details>
<summary>펼치기/접기</summary>

### 주요 특징

1. 인터프리터 언어
런타임에 코드를 해석하고 실행하는 언어로, 현대 JavaScript 엔진은 성능 최적화를 위해 JIT 컴파일도 함께 활용함

2. 동적 타이핑(Dynamic Typing)
변수의 타입을 명시하지 않고도 사용할 수 있으며, 실행 중에 변수 타입이 바뀔 수도 있음

3. 싱글 스레드 기반
하나의 실행 흐름(스레드)만으로 동작하지만, 이벤트 루프와 콜백 메커니즘으로 비동기 처리도 가능

4. 프로토타입 기반 객체지향
클래스 기반 객체지향(C++, Java 등)과 달리 프로토타입을 통해 객체를 상속하고 확장하는 방식

[위로](#자바스크립트의-특징)

</details>

## 이벤트 루프(Event Loop)

<details>
<summary>펼치기/접기</summary>

### 기본 개념
- 이벤트 루프(Event Loop)는 자바스크립트의 핵심 실행 원리 중 하나
- 웹브라우저의 Web APIs(예: setTimeout, fetch, DOM 이벤트 등)와 협력해 비동기 작업을 지원
- 콜 스택(Call Stack)과 콜백 큐(Callback Queue)를 통해 작업 실행 순서를 제어

### 콜 스택 (Call Stack)
- 현재 실행 중인 함수와 실행 컨텍스트(실행 환경)를 저장하는 스택 자료구조
- 실행할 함수가 호출되면 콜 스택의 가장 위에 쌓이고, 함수 실행이 끝나면 스택에서 빠져나감

### 콜백 큐(Callback Queue)
- 비동기 작업의 콜백 함수들이 대기하는 큐(대기실)
- setTimeout, fetch 완료 후 호출되는 콜백, 이벤트 핸들러 등 비동기 작업의 결과로 실행할 함수들이 들어감
- 콜백 큐는 먼저 들어온 콜백 함수가 먼저 실행되는 선입선출(FIFO) 구조

### 이벤트 루프(Event Loop)에서 실행 순서 제어
1. 자바스크립트 엔진은 반복해서 콜 스택이 비어 있는지 확인
2. 콜 스택이 비어 있으면, 다음 순서로 작업을 처리:
   - 먼저 마이크로태스크 큐의 모든 작업을 콜 스택으로 이동하여 실행
   - 마이크로태스크 큐가 완전히 비워지면, 매크로태스크 큐에서 하나의 작업을 콜 스택으로 이동하여 실행
3. 태스크 큐의 종류:
   - ``마이크로태스크 큐``: Promise.then(), queueMicrotask() 등 우선순위가 높은 비동기 작업
   - ``매크로태스크 큐``: setTimeout(), setInterval(), DOM 이벤트 등 일반적인 비동기 작업

[위로](#이벤트-루프event-loop)

</details>

# 질문 다시 답변해보기

## 디바운스와 스로틀의 차이에 대해 말해주세요.

```text
디바운스와 스로틀은 이벤트가 반복적으로 발생할 때 불필요한 함수 호출과 네트워크 요청을 줄여 성능을 최적화하는 기법들입니다.

디바운스는 마지막 이벤트 발생 후 일정 시간 동안 이벤트가 없을 때에만 한 번 실행하는 기법으로,
주로 검색창에서 사용자 입력이 멈추고 일정 시간이 지난 후에 요청하는 경우에 사용합니다.

스로틀은 이벤트가 계속해서 발생해도 설정된 시간 간격마다 한 번씩만 실행하도록 제한하는 기법으로,
주로 무한 스크롤 구현과 같은 기능에서 이벤트를 일정 주기마다 한번씩 처리하여 과도한 호출을 방지하기 위한 경우에 사용됩니다.
```

## 콜백 함수에 대해서 설명해주세요.

```text
콜백 함수란, 함수에 인자로 전달되어 특정 이벤트가 발생하거나 작업이 완료되면 호출되는 함수를 뜻합니다.
주로 비동기 작업의 결과를 처리하기 위해 사용되지만, 연속적인 처리(체이닝) 과정에서는 과도한 콜백 함수가 "콜백 지옥" 현상을 불러오기도 합니다.

이러한 문제를 해결하기 위해 비동기 작업에서는 ES6 이후부터 사용 가능한 프로미스 객체를 활용하는 것이 더 좋다고 생각합니다.
프로미스 객체를 사용함으로써 기존의 체이닝 문제도 쉽게 해결할 수 있고,
객체에 저장된 pending/fulfilled/rejected 상태로 비동기 작업의 진행 상황을 명확히 추적할 수 있습니다.
또한, 저장된 결과를 여러 곳에서 재사용할 수 있습니다.  
```

## 자바스크립트에 대해서 설명해주세요.

```text
자바스크립트는 웹 환경에 최적화된 인터프리터 기반의 싱글 스레드 언어입니다.

주요 특징으로는 동적 타이핑으로 변수 타입을 런타임에 결정하고, 
프로토타입 기반 객체지향을 통해 유연한 상속 구조를 제공합니다.
또한 함수를 일급 객체로 취급해 함수형 프로그래밍 스타일도 폭넓게 지원하여 개발 유연성이 높습니다.

이벤트 루프와 콜백 메커니즘을 통한 비동기 처리가 가능해 논블로킹 I/O를 구현할 수 있으며,
브라우저뿐만 아니라 Node.js를 통해 서버 개발도 가능한 크로스 플랫폼 언어입니다.

단, 동적 타이핑으로 인한 느슨한 타입 검사가 오히려 문제가 될 때가 있기 때문에, 
최근에는 타입스크립트를 병행하는 경향이 많습니다.
```

## 이벤트 루프에 대해서 설명해주세요.

```text
이벤트 루프란, 자바스크립트에서 비동기 작업을 실행하기 위한 핵심 매커니즘입니다.
이벤트 루프는 현재 실행 중인 함수들이 쌓이는 콜 스택과 비동기 작업 결과를 대기시키는 태스크 큐를 통해 "동시에" 작업되는 것처럼 보이게 합니다.

setTiemout 내장 메소드를 통해 예를 들자면,
함수를 호출하고, 내장되어 있던 콜백 함수가 바로 실행되지 않고 웹 API에 의해 타이머가 설정됩니다.
타이머가 0밀리초 후에 만료되면 콜백 함수가 태스크 큐에 추가되고,
이후 콜스택이 비어 있는 시점에 이벤트 루프가 태스크 큐에서 대기 중인 콜백 함수를 실행시킵니다.

```